<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0 ,user-scalable=no">
    <title>Document</title>
    
</head>
<body>
    <div classname="container1">
        <input  id="namebox" placeholder="digite algo">
        <button class="botao" id="insert"> Adicionar </button>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script> 

    <script id="MainScript">

//--------------Tratamento dos Dados -------------

        // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyAt6ReSmU1uc79HVYw90n52AqhCrr4KKOk",
        authDomain: "projetofirebase-4e8a8.firebaseapp.com",
        databaseURL: "https://projetofirebase-4e8a8.firebaseio.com/",
        projectId: "projetofirebase-4e8a8",
        storageBucket: "projetofirebase-4e8a8.appspot.com",
        messagingSenderId: "640104294627",
        appId: "1:640104294627:web:9d96157eb6eb936ebe7dd6"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
//---------------Insert Process --------------

    document.getElementById('insert').onclick = function(){
            alert('Mensagem enviada com sucesso!');
            Ready();
            
        
            firebase.database().ref('student/'+nameV).set({
                hora: horario,
                startedAt: firebase.database.ServerValue.TIMESTAMP 
            })
        
        }
    
    //---------------READY DATA -----------------
        var nameV, numV, secV, genV;
        var data = new Date();
        var dia     = data.getDate();           // 1-31
        var dia_sem = data.getDay();            // 0-6 (zero=domingo)
        var mes     = data.getMonth();          // 0-11 (zero=janeiro)
        var ano2    = data.getYear();           // 2 dígitos
        var ano4    = data.getFullYear();       // 4 dígitos
        var hora    = data.getHours();          // 0-23
        var min     = data.getMinutes();        // 0-59
        var seg     = data.getSeconds();        // 0-59
        var mseg    = data.getMilliseconds();   // 0-999
        var tz      = data.getTimezoneOffset(); // em minutos

        // Formata a data e a hora (note o mês + 1)
        var str_data = dia + '/' + (mes+1) + '/' + ano4;
        var str_hora = hora+':'+min+':'+seg
        // hora + ':' + min + ':' + seg;
        console.log(str_hora);

        function Ready(){
            nameV = document.getElementById('namebox').value;
            horario = str_hora
        }
        
    </script>
</body>
</html>
